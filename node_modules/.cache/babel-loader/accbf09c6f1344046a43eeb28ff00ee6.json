{"ast":null,"code":"var _jsxFileName = \"/home/lea/Desktop/mon-app/src/components/cards/Message-item.js\";\nimport React, { Component } from 'react';\nimport { Col, Button } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck, faTrashAlt, faReply, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport DateFormat from '../function';\nimport ip from '../ip';\nimport Mailto from 'react-protected-mailto';\nconst readMessage = {\n  backgroundColor: \"#ededed\",\n  fontSize: \"0.8em\"\n};\n\nclass MessageItem extends Component {\n  constructor(props) {\n    super(props);\n    this.onReadClick = this.onReadClick.bind(this);\n    this.deleteMessage = this.deleteMessage.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.state = {\n      readFromDb: this.props.messageRead,\n      display: true\n    };\n  }\n\n  onReadClick(data) {\n    let ctx = this;\n    fetch(`${ip}/admins/read-message`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: `message_id=${data}&`\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      ctx.setState({\n        readFromDb: data.newMessage.read\n      });\n    });\n  }\n\n  deleteMessage(data) {\n    let ctx = this;\n    fetch(`${ip}/admins/delete-message`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: `message_id=${data}`\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      ctx.setState({\n        display: false\n      });\n      ctx.handleClick();\n    });\n  }\n\n  handleClick() {\n    this.props.handleClickParent();\n  }\n\n  render() {\n    var iconMessage = faCheck;\n    var marker = \"Marquer comme lu\";\n    var styleMessage;\n\n    if (this.state.readFromDb === true) {\n      styleMessage = readMessage;\n      iconMessage = faTimes;\n      marker = \"Marquer comme non lu\";\n    }\n\n    if (this.state.display === false) {\n      console.log(\"pas de message\");\n    }\n\n    return React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        paddingTop: \"4%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: \"9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: styleMessage,\n      class: \"roww\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 11,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Sujet : \", this.props.messageObject), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"De la part de:  \", this.props.messageSender), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, this.props.messageContent, \"  \"), this.props.messagePhoto != null ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      style: {\n        width: \"10em\",\n        marginLeft: '10%'\n      },\n      alt: \" \",\n      src: this.props.messagePhoto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Envoy\\xE9 le : \", DateFormat(this.props.messageDate), \" \"))), React.createElement(Col, {\n      lg: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        backgroundColor: \"#1B263B\",\n        border: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      style: {\n        color: \"white\"\n      },\n      href: \"mailto:\" + this.props.messageSender,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \" \", React.createElement(FontAwesomeIcon, {\n      style: {\n        backgroundColor: '#1B263B'\n      },\n      icon: faReply,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: () => this.onReadClick(this.props.messageId),\n      style: {\n        backgroundColor: \"#1B263B\",\n        border: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      style: {\n        color: \"white\"\n      },\n      title: marker,\n      icon: iconMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: () => this.deleteMessage(this.props.messageId),\n      style: {\n        backgroundColor: \"#1B263B\",\n        border: \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \" \", React.createElement(FontAwesomeIcon, {\n      style: {\n        color: \"white\"\n      },\n      icon: faTrashAlt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default MessageItem;","map":{"version":3,"sources":["/home/lea/Desktop/mon-app/src/components/cards/Message-item.js"],"names":["React","Component","Col","Button","FontAwesomeIcon","faCheck","faTrashAlt","faReply","faTimes","DateFormat","ip","Mailto","readMessage","backgroundColor","fontSize","MessageItem","constructor","props","onReadClick","bind","deleteMessage","handleClick","state","readFromDb","messageRead","display","data","ctx","fetch","method","headers","body","then","response","json","setState","newMessage","read","handleClickParent","render","iconMessage","marker","styleMessage","console","log","justifyContent","paddingTop","messageObject","messageSender","messageContent","messagePhoto","width","marginLeft","messageDate","border","color","messageId"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { Col, Button } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheck, faTrashAlt, faReply, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport DateFormat from '../function'\nimport ip from '../ip'\nimport Mailto from 'react-protected-mailto'\n\n\nconst readMessage ={\n  backgroundColor:\"#ededed\",\n  fontSize: \"0.8em\"\n}\n\n\nclass MessageItem extends Component{\n  constructor(props){\n    super(props);\n    this.onReadClick = this.onReadClick.bind(this);\n    this.deleteMessage = this.deleteMessage.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.state={\n      readFromDb: this.props.messageRead,\n      display: true,\n    }\n  }\n\n  onReadClick(data){\n    let ctx = this;\n    fetch(`${ip}/admins/read-message`,{\n      method: 'POST',\n      headers: {'Content-Type':'application/x-www-form-urlencoded'},\n      body: `message_id=${data}&`\n     })\n     .then(function(response) {\n      return response.json();\n    })\n    .then(function(data){\n      ctx.setState({readFromDb: data.newMessage.read})\n    })\n    \n  }\n\n  deleteMessage(data){\n    let ctx = this\n     fetch(`${ip}/admins/delete-message`,{\n      method: 'POST',\n      headers: {'Content-Type':'application/x-www-form-urlencoded'},\n      body: `message_id=${data}`\n       })\n       .then(function(response) {\n        return response.json();\n      })\n      .then(function(data){\n        ctx.setState({display: false})\n        ctx.handleClick()\n      }) \n   }\n\n   handleClick(){\n    this.props.handleClickParent()\n   }\n\n  render(){\n    var iconMessage = faCheck\n    var marker = \"Marquer comme lu\"\n    var styleMessage;\n    if (this.state.readFromDb === true){\n      styleMessage = readMessage\n      iconMessage = faTimes\n      marker = \"Marquer comme non lu\"\n    }\n    if (this.state.display === false){\n      console.log(\"pas de message\")\n    }\n\n    return(\n      <div style={{ display:\"flex\", justifyContent:\"center\", paddingTop:\"4%\"}}>\n      <Col sm=\"9\">  \n        <div style={styleMessage} class=\"roww\">\n        <Col lg={11}>\n        <div  class=\"content\">  \n        <h4>Sujet : {this.props.messageObject}</h4>\n        <p>De la part de:  {this.props.messageSender}</p>\n          <p>{this.props.messageContent}  </p>\n          {this.props.messagePhoto != null ?(\n            <div>\n            <img style={{width:\"10em\", marginLeft:'10%'}} alt=\" \" src={this.props.messagePhoto} />\n            </div>\n          ):(\n            <div></div>\n          )}\n          <p>Envoyé le : {DateFormat(this.props.messageDate)} </p>\n        </div>\n        </Col>\n        <Col lg={1}>\n          <div>\n            <Button style={{backgroundColor: \"#1B263B\", border:\"none\"}}><a style={{color:\"white\"}} href={\"mailto:\"+this.props.messageSender}> <FontAwesomeIcon style={{backgroundColor:'#1B263B'}} icon={faReply} /></a></Button>\n            <br></br>\n            <br></br>\n            <Button onClick={() => this.onReadClick(this.props.messageId)} style={{backgroundColor: \"#1B263B\", border:\"none\"}}><FontAwesomeIcon  style={{color:\"white\"}} title={marker} icon={iconMessage} /></Button>\n            <br></br>\n            <br></br>\n            <Button onClick={() => this.deleteMessage(this.props.messageId)} style={{backgroundColor: \"#1B263B\", border:\"none\"}}> <FontAwesomeIcon style={{color:\"white\"}} icon={faTrashAlt} /></Button>\n          </div>                    \n          </Col>\n          </div> \n        </Col>\n\n    </div>\n    )\n  }\n}\n\nexport default MessageItem;"]},"metadata":{},"sourceType":"module"}