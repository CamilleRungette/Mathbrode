{"ast":null,"code":"var _jsxFileName = \"/home/lea/Desktop/mon-app/src/components/Classes.js\";\nimport React, { Component } from 'react';\nimport Footer from './Footer';\nimport Navbar from './Navbar';\nimport { Button, Input, Card, CardImg, CardText, CardBody, CardTitle, ListGroup, ListGroupItem, Col, Row } from 'reactstrap';\nimport { Modal, Form } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport ip from './ip';\nlet modalStyle = {\n  width: \"50em\",\n  backgroundColor: \"white\",\n  fontFamily: \"Raleway\"\n};\n\nclass Classes extends Component {\n  constructor() {\n    super();\n    this.handleClose = this.handleClose.bind(this);\n    this.handleShow = this.handleShow.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n    this.uploadMessageImage = this.uploadMessageImage.bind(this);\n    this.state = {\n      workshops: [],\n      show: false,\n      SendMessageContent: '',\n      SendMessageEmail: '',\n      SendMessagePhoto: '',\n      SendMessageName: '',\n      loading: ''\n    };\n  }\n\n  handleClose() {\n    this.setState({\n      show: false\n    });\n  }\n\n  handleShow() {\n    this.setState({\n      show: true\n    });\n  }\n\n  sendMessage() {\n    this.setState({\n      show: false\n    });\n    fetch(`${ip}/users/create-message`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: `object=Atelier&content=${this.state.SendMessageContent}&sender_email=${this.state.SendMessageEmail}&photo=${this.state.SendMessagePhoto}&sender_name=${this.state.SendMessageName}`\n    });\n  }\n\n  async uploadMessageImage(e) {\n    const files = e.target.files;\n    const data = new FormData();\n    data.append('file', files[0]);\n    data.append('upload_preset', 'camille');\n    this.setState({\n      loading: true\n    });\n    const res = await fetch('https://api.cloudinary.com/v1_1/dduugb9jy/image/upload', {\n      method: 'POST',\n      body: data\n    });\n    const file = await res.json();\n    console.log(\"==================>\", file.secure_url);\n    this.setState({\n      SendMessagePhoto: file.secure_url\n    });\n    this.setState({\n      loading: false\n    });\n  }\n\n  componentDidMount() {\n    let ctx = this;\n    fetch(`${ip}/workshops`).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      ctx.setState({\n        workshops: data.allWorkshops\n      });\n      console.log(\"THE STATE\", ctx.state.workshops);\n    }).catch(function (error) {\n      console.log(\"FAILED\");\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        fontFamily: \"Raleway\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        height: \"8em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(Col, {\n      sm: 11,\n      style: {\n        margin: \"auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        textAlign: \"center\",\n        fontSize: \"3.5em\",\n        marginTop: \"0.5em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Les Ateliers\"), React.createElement(\"div\", {\n      style: {\n        height: \"8em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        margin: \"auto\",\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        flexWrap: \"wrap\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.state.workshops.map((workshop, i) => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        maxWidth: '33em',\n        marginBottom: '3em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(CardImg, {\n      variant: \"top\",\n      style: {\n        height: \"18em\"\n      },\n      src: workshop.photo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(CardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(CardTitle, {\n      style: {\n        fontSize: \"1.3em\",\n        textAlign: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \" \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \" \", workshop.title, \" \")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(CardText, {\n      style: {\n        fontSize: \"1.1em\",\n        width: '95%',\n        margin: \"auto\",\n        textAlign: 'justify'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, workshop.desc)), React.createElement(CardBody, {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        fontSize: '1.2em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(CardText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \" \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Prix : \"), \" \", workshop.price, \" \\u20AC\"), React.createElement(CardText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \" \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Dur\\xE9e: \"), \" \", workshop.duration)), React.createElement(ListGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(ListGroupItem, {\n      style: {\n        textAlign: \"center\",\n        fontSize: '1.2em',\n        fontWeight: \"bold\",\n        cursor: \"pointer\"\n      },\n      onClick: this.handleShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"R\\xE9server un cr\\xE9neau \"))))))), React.createElement(\"div\", {\n      style: {\n        height: \"8em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(Modal, {\n      show: this.state.show,\n      onHide: this.handleClose,\n      className: \"col-lg-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: modalStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Message pour r\\xE9servation d'atelier\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, this.props.user == null ? React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Nom\",\n      onChange: e => this.setState({\n        SendMessageName: e.target.value\n      }),\n      value: this.state.SendMessageName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }) : React.createElement(Input, {\n      type: \"text\",\n      placeholder: \"Nom\",\n      value: this.props.user.first_name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, this.props.user == null ? React.createElement(Form.Control, {\n      type: \"email\",\n      placeholder: \"Email\",\n      onChange: e => this.setState({\n        SendMessageEmail: e.target.value\n      }),\n      value: this.state.SendMessageEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }) : React.createElement(Input, {\n      type: \"Email\",\n      placeholder: \"Email\",\n      value: this.props.user.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    })))), React.createElement(Form.Group, {\n      controlId: \"formBasicPassword\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      as: \"textarea\",\n      placeholder: \"Message\",\n      onChange: e => this.setState({\n        SendMessageContent: e.target.value\n      }),\n      value: this.state.SendMessageContent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      as: Row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      column: true,\n      sm: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Photo\"), React.createElement(Col, {\n      sm: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      placeholder: \"upload an image\",\n      onChange: this.uploadMessageImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    })), this.state.loading ? React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \" Chargement ...\") : React.createElement(\"img\", {\n      src: this.state.SendMessagePhoto,\n      alt: \" \",\n      style: {\n        width: \"10em\",\n        marginLeft: '8em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }))), React.createElement(Button, {\n      style: {\n        backgroundColor: \"#1B263B\",\n        border: \"none\"\n      },\n      variant: \"secondary\",\n      onClick: this.sendMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Envoyer\")))));\n  }\n\n}\n\nfunction mapStatetoProps(state) {\n  console.log(state);\n  return {\n    user: state.user.userSigned\n  };\n}\n\nexport default connect(mapStatetoProps, null)(Classes);","map":{"version":3,"sources":["/home/lea/Desktop/mon-app/src/components/Classes.js"],"names":["React","Component","Footer","Navbar","Button","Input","Card","CardImg","CardText","CardBody","CardTitle","ListGroup","ListGroupItem","Col","Row","Modal","Form","connect","ip","modalStyle","width","backgroundColor","fontFamily","Classes","constructor","handleClose","bind","handleShow","sendMessage","uploadMessageImage","state","workshops","show","SendMessageContent","SendMessageEmail","SendMessagePhoto","SendMessageName","loading","setState","fetch","method","headers","body","e","files","target","data","FormData","append","res","file","json","console","log","secure_url","componentDidMount","ctx","then","response","allWorkshops","catch","error","render","height","margin","textAlign","fontSize","marginTop","display","justifyContent","flexWrap","map","workshop","i","maxWidth","marginBottom","photo","title","desc","price","duration","fontWeight","cursor","props","user","value","first_name","email","marginLeft","border","mapStatetoProps","userSigned"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Footer from './Footer'\nimport Navbar from './Navbar'\nimport {Button, Input, Card, CardImg, CardText, CardBody, CardTitle, ListGroup, ListGroupItem, Col, Row } from 'reactstrap';\nimport {Modal, Form} from 'react-bootstrap'\nimport {connect} from 'react-redux'\nimport ip from './ip'\n\n\nlet modalStyle={\n  width:\"50em\",\n  backgroundColor: \"white\",\n  fontFamily: \"Raleway\",\n}\n\n\nclass Classes extends Component{\n  constructor(){\n    super();\n    this.handleClose = this.handleClose.bind(this)\n    this.handleShow = this.handleShow.bind(this)\n    this.sendMessage = this.sendMessage.bind(this)  \n    this.uploadMessageImage = this.uploadMessageImage.bind(this);\n\n    this.state = {\n      workshops:[],\n      show: false,\n      SendMessageContent: '',\n      SendMessageEmail: '',\n      SendMessagePhoto: '', \n      SendMessageName:'', \n      loading: '',\n    }\n  }\n\n  handleClose(){\n    this.setState({show: false})\n  }\n\n  handleShow(){\n    this.setState({show:true})\n  }\n\n  sendMessage(){\n    this.setState({show:false});\n    fetch(`${ip}/users/create-message`, {\n      method: 'POST',\n      headers: {'Content-Type':'application/x-www-form-urlencoded'},\n      body: `object=Atelier&content=${this.state.SendMessageContent}&sender_email=${this.state.SendMessageEmail}&photo=${this.state.SendMessagePhoto}&sender_name=${this.state.SendMessageName}`\n    })\n  }\n\n  async uploadMessageImage(e){\n    const files = e.target.files\n    const data= new FormData()\n    data.append('file', files[0])\n    data.append('upload_preset', 'camille')\n    this.setState({loading: true})\n    const res = await fetch('https://api.cloudinary.com/v1_1/dduugb9jy/image/upload', {\n        method: 'POST',\n        body: data\n      })\n    const file = await res.json()\n    console.log(\"==================>\", file.secure_url)\n    \n    this.setState({SendMessagePhoto: file.secure_url})\n    this.setState({loading: false})\n  }\n\n\n  componentDidMount(){\n    let ctx = this\n    fetch(`${ip}/workshops`)\n    .then(function(response) {\n      return response.json();\n    })\n    .then(function(data){\n      ctx.setState({workshops: data.allWorkshops})\n      console.log(\"THE STATE\", ctx.state.workshops)\n    })\n    .catch(function(error){\n      console.log(\"FAILED\")\n    });\n\n  } \n\n  render(){\n    return(\n    <div style={{fontFamily:\"Raleway\"}}>\n      <Navbar/>\n      <div style={{height:\"8em\"}}></div>\n      <Col sm={11} style={{margin:\"auto\"}}>\n      <h1 style={{textAlign:\"center\", fontSize:\"3.5em\", marginTop:\"0.5em\"}}>Les Ateliers</h1>\n      <div style={{height:\"8em\"}}></div>\n      <div style={{margin:\"auto\", display:\"flex\", justifyContent:\"space-around\", flexWrap:\"wrap\"}}>\n      {this.state.workshops.map((workshop, i) =>(\n        <div>\n          <Card style={{maxWidth:'33em', marginBottom:'3em'}}>\n          <CardImg variant=\"top\" style={{height:\"18em\"}} src={workshop.photo}/>\n          <CardBody>\n            <CardTitle style={{fontSize:\"1.3em\", textAlign:\"center\"}}> <strong> {workshop.title} </strong></CardTitle>\n            <br/>\n            <CardText style={{fontSize:\"1.1em\", width:'95%', margin:\"auto\", textAlign:'justify'}}>\n              {workshop.desc}\n            </CardText>\n          </CardBody>\n          <CardBody style={{display:\"flex\", justifyContent:\"space-around\", fontSize:'1.2em'}}>\n              <CardText > <strong>Prix : </strong> {workshop.price} €</CardText>\n              <CardText > <strong>Durée: </strong> {workshop.duration}</CardText>\n          </CardBody>\n          <ListGroup>\n            <ListGroupItem style={{textAlign:\"center\", fontSize:'1.2em', fontWeight:\"bold\", cursor:\"pointer\"}}  onClick={this.handleShow} >Réserver un créneau </ListGroupItem>\n          </ListGroup>\n        </Card>\n      </div>\n       ))} \n       </div>\n       </Col>\n       <div style={{height:\"8em\"}}></div>\n\n      <Footer />\n\n      <Modal show={this.state.show} onHide={this.handleClose} className=\"col-lg-10\" >\n         <div style={modalStyle}>\n          <Modal.Header closeButton>\n            <Modal.Title>Message pour réservation d'atelier</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n          <Form>\n          <Row>\n            <Col>\n              <Form.Group>\n                {this.props.user == null?(\n                  <Form.Control type=\"text\" placeholder=\"Nom\" onChange={(e)=> this.setState({SendMessageName: e.target.value})}\n                  value={this.state.SendMessageName} />\n                ):(\n                  <Input type=\"text\" placeholder=\"Nom\" value={this.props.user.first_name}/>\n                  )}\n              </Form.Group>\n            </Col>\n\n            <Col>\n            <Form.Group>\n              {this.props.user == null ? (\n                <Form.Control type=\"email\" placeholder=\"Email\" onChange={(e)=> this.setState({SendMessageEmail: e.target.value})}\n                value={this.state.SendMessageEmail} />\n              ):(\n                <Input type=\"Email\"  placeholder=\"Email\" value={this.props.user.email} />\n\n              )}\n            </Form.Group>\n            </Col>\n            </Row>\n\n            <Form.Group controlId=\"formBasicPassword\">\n              <Form.Control as=\"textarea\" placeholder=\"Message\" onChange={(e)=> this.setState({SendMessageContent: e.target.value})} \n              value={this.state.SendMessageContent} />\n            </Form.Group>\n\n            <Form.Group as={Row} >\n              <Form.Label column sm={2}>Photo</Form.Label>\n                <Col sm={10}>\n                <input type=\"file\"\n                placeholder=\"upload an image\"\n                onChange={this.uploadMessageImage} \n                />\n                  </Col>  \n                {this.state.loading ? (\n                  <h6> Chargement ...</h6>\n                ) : (\n                 <img src={this.state.SendMessagePhoto} alt=\" \" style={{width:\"10em\", marginLeft:'8em'}} />\n                )}\n            </Form.Group>\n          </Form>\n          <Button style={{backgroundColor:\"#1B263B\", border:\"none\"}} variant=\"secondary\" onClick={this.sendMessage}> \n              Envoyer\n            </Button>\n          </Modal.Body>\n         </div>\n       </Modal>\n\n\n      \n    </div>\n    )}\n}\n\nfunction mapStatetoProps(state){\n  console.log(state)\n  return  {user: state.user.userSigned}\n}\n\nexport default connect(\n  mapStatetoProps,\n  null\n)(Classes);\n"]},"metadata":{},"sourceType":"module"}