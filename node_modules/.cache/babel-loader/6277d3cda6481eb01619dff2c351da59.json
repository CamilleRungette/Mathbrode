{"ast":null,"code":"var _jsxFileName = \"/home/lea/Desktop/mon-app/src/components/dashboardComponents/messaging.js\";\nimport React from 'react';\nimport NavbarAdmin from './NavbarAdmin';\nimport FooterAdmin from './footerAdmin';\nimport MessageItem from '../cards/Message-item';\nimport { Card } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport ip from '../ip';\nconst givenSize = {\n  height: '70vh',\n  marginBottom: \"3em\"\n};\nconst noGivenSize = {\n  marginBottom: \"3em\"\n};\n\nclass Messages extends React.Component {\n  constructor() {\n    super();\n    this.handleClick = this.handleClick.bind(this);\n    this.state = {\n      messages: []\n    };\n  }\n\n  handleClick() {\n    console.log(\"coucou\");\n    let ctx = this;\n    fetch(`${ip}/admins/messages`).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      ctx.setState({\n        messages: data.allMessages\n      });\n      console.log(\"THE STATE FROM HANDLE CLICK ===========>\", ctx.state.messages);\n    });\n  }\n\n  componentDidMount() {\n    let ctx = this;\n    fetch(`${ip}/admins/messages`).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      ctx.setState({\n        messages: data.allMessages\n      });\n      console.log(\"THE STATE ===========>\", ctx.state.messages);\n    });\n  }\n\n  render() {\n    if (this.props.adminConnected == false || this.props.adminConnected == null) {\n      return React.createElement(Redirect, {\n        to: \"/loginadmin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      });\n    }\n\n    let messageList = this.state.messages.map(function (message, i) {\n      return React.createElement(MessageItem, {\n        handleClickParent: this.handleClick,\n        key: i,\n        messageObject: message.object,\n        messageContent: message.content,\n        messageSender: message.sender_email,\n        messageDate: message.date,\n        messageId: message._id,\n        messageRead: message.read,\n        messagePhoto: message.photo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      });\n    }, this);\n    let size;\n\n    if (messageList.length <= 1) {\n      size = givenSize;\n    } else {\n      size = noGivenSize;\n    }\n\n    return React.createElement(\"div\", {\n      style: {\n        fontFamily: \"Raleway\"\n      },\n      className: \"mainBack\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(NavbarAdmin, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: size,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        height: \"6em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(Card, {\n      className: \"col-8 mx-auto\",\n      style: {\n        maxHeight: \"160vh\",\n        overflow: \"auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: {\n        textAlign: \"center\",\n        fontSize: \"3em\",\n        marginTop: '1em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Messagerie (\", messageList.length, \")\"), React.createElement(\"div\", {\n      style: {\n        height: \"1em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), messageList.length === 0 ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        fontSize: '1.3em',\n        textAlign: 'center',\n        marginTop: \"2em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Pas de messages\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, messageList), React.createElement(\"div\", {\n      style: {\n        height: \"6em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        height: \"6em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(FooterAdmin, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })));\n  }\n\n}\n\nfunction mapStatetoProps(state) {\n  console.log(\"======>\", state);\n  return {\n    adminConnected: state.admin.isAdminExist\n  };\n}\n\nexport default connect(mapStatetoProps, null)(Messages);","map":{"version":3,"sources":["/home/lea/Desktop/mon-app/src/components/dashboardComponents/messaging.js"],"names":["React","NavbarAdmin","FooterAdmin","MessageItem","Card","connect","Redirect","ip","givenSize","height","marginBottom","noGivenSize","Messages","Component","constructor","handleClick","bind","state","messages","console","log","ctx","fetch","then","response","json","data","setState","allMessages","componentDidMount","render","props","adminConnected","messageList","map","message","i","object","content","sender_email","date","_id","read","photo","size","length","fontFamily","maxHeight","overflow","textAlign","fontSize","marginTop","mapStatetoProps","admin","isAdminExist"],"mappings":"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","sourcesContent":["import React from 'react';\nimport NavbarAdmin from './NavbarAdmin';\nimport FooterAdmin from './footerAdmin'\nimport MessageItem from '../cards/Message-item';\nimport {Card} from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport ip from '../ip'\n\nconst givenSize ={\n  height: '70vh',\n  marginBottom:\"3em\"\n}\n\nconst noGivenSize={\n  marginBottom:\"3em\"\n}\n\nclass Messages extends React.Component{\n\n  constructor(){\n    super()\n    this.handleClick = this.handleClick.bind(this);\n    this.state= {\n      messages: [],\n    }\n  }\n\n  handleClick(){\n    console.log(\"coucou\")\n    let ctx = this;\n    fetch(`${ip}/admins/messages`)\n    .then(function(response) {\n      return response.json();\n    })\n    .then(function(data){\n      ctx.setState({messages: data.allMessages})\n     console.log(\"THE STATE FROM HANDLE CLICK ===========>\", ctx.state.messages)\n    })\n  }\n\n  componentDidMount(){\n    let ctx = this;\n    fetch(`${ip}/admins/messages`)\n    .then(function(response) {\n      return response.json();\n    })\n    .then(function(data){\n      ctx.setState({messages: data.allMessages})\n     console.log(\"THE STATE ===========>\", ctx.state.messages)\n    })\n  }\n\n    render(){\n      if (this.props.adminConnected == false || this.props.adminConnected == null){\n        return <Redirect to=\"/loginadmin\" />\n     }\n\n      let messageList = this.state.messages.map(function(message, i){\n        return <MessageItem handleClickParent={this.handleClick} key={i}\n        messageObject={message.object}\n        messageContent={message.content}\n        messageSender={message.sender_email}\n        messageDate={message.date}\n        messageId = {message._id}\n        messageRead = {message.read}\n        messagePhoto = {message.photo}\n        />\n      }, this)\n\n      let size;\n      if (messageList.length <= 1) {\n        size = givenSize\n      } else{\n        size= noGivenSize\n      }\n        return(\n          <div style={{fontFamily:\"Raleway\"}} className=\"mainBack\">\n          <NavbarAdmin/>\n          <div style={size}>\n          <div style={{height:\"6em\"}}></div>\n          <Card className=\"col-8 mx-auto\" style={{maxHeight:\"160vh\", overflow:\"auto\"}} >\n          <h2 style={{textAlign:\"center\", fontSize:\"3em\", marginTop:'1em'}}>Messagerie ({messageList.length})</h2>\n          <div style={{height:\"1em\"}}></div>\n          {messageList.length === 0?(\n            <div>\n              <div style={{fontSize:'1.3em', textAlign:'center', marginTop:\"2em\"}} >Pas de messages</div>\n            </div>\n          ):(\n            <div>           \n              {messageList}\n            </div>\n\n          )}\n            <div style={{height:\"6em\"}}></div>\n            </Card>\n            <div style={{height:\"6em\"}}></div>\n          <FooterAdmin/>\n            </div>\n          </div>     \n        )}\n}\n\n\nfunction mapStatetoProps(state){\n  console.log(\"======>\", state)\n  return {adminConnected: state.admin.isAdminExist}\n}\n\n\nexport default connect(\n  mapStatetoProps,\n  null\n  )(Messages);\n\n\n\n"]},"metadata":{},"sourceType":"module"}